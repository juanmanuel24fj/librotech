{"ast":null,"code":"import { Libro } from '../model/libro.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/libro.service\";\nimport * as i2 from \"../services/reserva.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction LibrosComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"div\", 15);\n    i0.ɵɵlistener(\"click\", function LibrosComponent_div_20_Template_div_click_1_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.cerrarDetalleLibro());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"div\", 16)(3, \"span\", 17);\n    i0.ɵɵlistener(\"click\", function LibrosComponent_div_20_Template_span_click_3_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.cerrarDetalleLibro());\n    });\n    i0.ɵɵtext(4, \"\\u00D7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"h3\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"img\", 18);\n    i0.ɵɵelementStart(12, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function LibrosComponent_div_20_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.reservarLibro(ctx_r7.libroBuscado));\n    });\n    i0.ɵɵtext(13, \"Reservar\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r0.libroBuscado.titulo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Autor: \", ctx_r0.libroBuscado.autor, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Ejemplares disponibles: \", ctx_r0.libroBuscado.ejemplaresDisponibles, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"alt\", ctx_r0.libroBuscado.titulo);\n    i0.ɵɵproperty(\"src\", ctx_r0.getImagenUrl(ctx_r0.libroBuscado.imagen), i0.ɵɵsanitizeUrl);\n  }\n}\nfunction LibrosComponent_div_21_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 21)(1, \"div\", 22);\n    i0.ɵɵelement(2, \"img\", 23);\n    i0.ɵɵelementStart(3, \"div\", 24)(4, \"h5\", 25);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 26);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\", 26);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function LibrosComponent_div_21_div_1_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const libro_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.mostrarDetalleLibro(libro_r9));\n    });\n    i0.ɵɵtext(11, \"Ver Detalle\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const libro_r9 = ctx.$implicit;\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"alt\", libro_r9.titulo);\n    i0.ɵɵproperty(\"src\", ctx_r8.getImagenUrl(libro_r9.imagen), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(libro_r9.titulo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Autor: \", libro_r9.autor, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Ejemplares Disponibles: \", libro_r9.ejemplaresDisponibles, \"\");\n  }\n}\nfunction LibrosComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtemplate(1, LibrosComponent_div_21_div_1_Template, 12, 5, \"div\", 20);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.libros);\n  }\n}\nfunction LibrosComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2, \"No se encontraron libros.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction LibrosComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 15);\n    i0.ɵɵlistener(\"click\", function LibrosComponent_div_23_Template_div_click_1_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.cerrarFormularioAgregar());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"div\", 14)(3, \"div\", 27)(4, \"span\", 17);\n    i0.ɵɵlistener(\"click\", function LibrosComponent_div_23_Template_span_click_4_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.cerrarFormularioAgregar());\n    });\n    i0.ɵɵtext(5, \"\\u00D7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"h2\");\n    i0.ɵɵtext(7, \"Agregar Nuevo Libro \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"form\", 28);\n    i0.ɵɵlistener(\"ngSubmit\", function LibrosComponent_div_23_Template_form_ngSubmit_8_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.agregarLibro());\n    });\n    i0.ɵɵelementStart(9, \"div\", 5)(10, \"label\", 29);\n    i0.ɵɵtext(11, \"T\\u00EDtulo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"input\", 30);\n    i0.ɵɵlistener(\"ngModelChange\", function LibrosComponent_div_23_Template_input_ngModelChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.nuevoLibro.titulo = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\", 5)(14, \"label\", 31);\n    i0.ɵɵtext(15, \"Autor\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"input\", 32);\n    i0.ɵɵlistener(\"ngModelChange\", function LibrosComponent_div_23_Template_input_ngModelChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.nuevoLibro.autor = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\", 5)(18, \"label\", 33);\n    i0.ɵɵtext(19, \"Ejemplares Disponibles\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"input\", 34);\n    i0.ɵɵlistener(\"ngModelChange\", function LibrosComponent_div_23_Template_input_ngModelChange_20_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.nuevoLibro.ejemplaresDisponibles = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"div\", 5)(22, \"label\", 35);\n    i0.ɵɵtext(23, \"Imagen\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"input\", 36);\n    i0.ɵɵlistener(\"change\", function LibrosComponent_div_23_Template_input_change_24_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.onFileSelected($event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"button\", 37);\n    i0.ɵɵtext(26, \"Agregar\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.nuevoLibro.titulo);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.nuevoLibro.autor);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.nuevoLibro.ejemplaresDisponibles);\n  }\n}\nexport class LibrosComponent {\n  constructor(libroService, reservaService, router) {\n    this.libroService = libroService;\n    this.reservaService = reservaService;\n    this.router = router;\n    this.libros = [];\n    this.nombreBusqueda = '';\n    this.mostrarFormulario = false;\n    this.nuevoLibro = new Libro(0, '', '', 0, '');\n  }\n  ngOnInit() {\n    this.obtenerLibros();\n  }\n  obtenerLibros() {\n    this.libroService.obtenerTodosLosLibros().subscribe(libros => {\n      console.log('Todos los libros:', libros);\n      this.libros = libros;\n    }, error => {\n      console.error('Error al obtener todos los libros:', error);\n    });\n  }\n  buscarLibrosPorNombre() {\n    console.log('Buscando libros con el nombre:', this.nombreBusqueda);\n    if (this.nombreBusqueda) {\n      this.libroService.buscarLibrosPorTitulo(this.nombreBusqueda).subscribe(respuesta => {\n        const libros = Array.isArray(respuesta) ? respuesta : [respuesta];\n        console.log('Libros encontrados:', libros);\n        if (libros.length > 0) {\n          this.libroBuscado = libros[0];\n          console.log('Libro buscado actualizado:', this.libroBuscado);\n        } else {\n          this.libroBuscado = undefined;\n          console.log('No se encontraron libros con el nombre:', this.nombreBusqueda);\n        }\n      }, error => {\n        console.error('Error al buscar libros por título:', error);\n      });\n    } else {\n      this.libroBuscado = undefined;\n      this.obtenerLibros();\n    }\n  }\n  onFileSelected(event) {\n    this.selectedFile = event.target.files[0];\n  }\n  getImagenUrl(imagen) {\n    return `http://localhost:8086/api/images/${imagen}`;\n  }\n  reservarLibro(libro) {\n    const usuarioId = 1; // Asigna el ID del usuario actualmente logueado\n    if (libro.ejemplaresDisponibles > 0) {\n      this.reservaService.reservarLibro(libro.id, usuarioId).subscribe(() => {\n        libro.ejemplaresDisponibles--;\n      }, error => {\n        console.error('Error al reservar libro:', error);\n      });\n    } else {\n      alert(`No hay ejemplares disponibles para el libro ${libro.titulo}.`);\n    }\n  }\n  mostrarFormularioAgregar() {\n    this.mostrarFormulario = true;\n  }\n  cerrarFormularioAgregar() {\n    this.mostrarFormulario = false;\n  }\n  agregarLibro() {\n    this.libroService.crearLibro(this.nuevoLibro).subscribe(libro => {\n      this.libros.push(libro);\n      this.cerrarFormularioAgregar();\n    }, error => {\n      console.error('Error al agregar libro:', error);\n    });\n  }\n  static #_ = this.ɵfac = function LibrosComponent_Factory(t) {\n    return new (t || LibrosComponent)(i0.ɵɵdirectiveInject(i1.LibroService), i0.ɵɵdirectiveInject(i2.ReservaService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LibrosComponent,\n    selectors: [[\"app-libros\"]],\n    decls: 24,\n    vars: 5,\n    consts: [[\"lang\", \"es\"], [\"charset\", \"UTF-8\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1.0\"], [\"href\", \"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\", \"rel\", \"stylesheet\"], [1, \"container\", \"mt-4\", \"libro-container\"], [1, \"mb-3\"], [\"for\", \"nombreBusqueda\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"nombreBusqueda\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"d-flex\", \"justify-content-between\", \"mt-2\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [\"class\", \"modal\", 4, \"ngIf\"], [\"class\", \"row\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"modal\"], [1, \"fondo-difuminado\", 3, \"click\"], [1, \"libro-cuadro\"], [1, \"close\", 3, \"click\"], [1, \"img-fluid\", 3, \"src\", \"alt\"], [1, \"row\"], [\"class\", \"col-md-4 mb-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-4\", \"mb-4\"], [1, \"card\", \"h-100\", \"card-libro\"], [1, \"card-img-top\", 3, \"src\", \"alt\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\"], [1, \"modal-content\"], [3, \"ngSubmit\"], [\"for\", \"titulo\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"titulo\", \"name\", \"titulo\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"autor\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"autor\", \"name\", \"autor\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"ejemplares\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"ejemplares\", \"name\", \"ejemplares\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"imagen\", 1, \"form-label\"], [\"type\", \"file\", \"id\", \"imagen\", 1, \"form-control\", 3, \"change\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"]],\n    template: function LibrosComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"html\", 0)(1, \"head\");\n        i0.ɵɵelement(2, \"meta\", 1)(3, \"meta\", 2);\n        i0.ɵɵelementStart(4, \"title\");\n        i0.ɵɵtext(5, \"Listado de Libros\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(6, \"link\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"body\")(8, \"div\", 4)(9, \"h2\");\n        i0.ɵɵtext(10, \"Listado de Libros\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 5)(12, \"label\", 6);\n        i0.ɵɵtext(13, \"Buscar:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"input\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function LibrosComponent_Template_input_ngModelChange_14_listener($event) {\n          return ctx.nombreBusqueda = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 8)(16, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function LibrosComponent_Template_button_click_16_listener() {\n          return ctx.buscarLibrosPorNombre();\n        });\n        i0.ɵɵtext(17, \"Buscar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function LibrosComponent_Template_button_click_18_listener() {\n          return ctx.mostrarFormularioAgregar();\n        });\n        i0.ɵɵtext(19, \"Agregar Libro\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(20, LibrosComponent_div_20_Template, 14, 5, \"div\", 11);\n        i0.ɵɵtemplate(21, LibrosComponent_div_21_Template, 2, 1, \"div\", 12);\n        i0.ɵɵtemplate(22, LibrosComponent_div_22_Template, 3, 0, \"div\", 13);\n        i0.ɵɵtemplate(23, LibrosComponent_div_23_Template, 27, 3, \"div\", 13);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"ngModel\", ctx.nombreBusqueda);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.libroBuscado);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.libros.length > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.libros.length);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.mostrarFormulario);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NumberValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.NgModel, i5.NgForm],\n    styles: [\".modal[_ngcontent-%COMP%] {\\n      display: none;\\n      justify-content: center;\\n      align-items: center;\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      background-color: rgba(0, 0, 0, 0.5);\\n      z-index: 1000;\\n    }\\n\\n    .modal-content[_ngcontent-%COMP%] {\\n      background-color: white;\\n      padding: 20px;\\n      border-radius: 5px;\\n      width: 500px;\\n      max-width: 100%;\\n      position: relative;\\n    }\\n\\n    .close[_ngcontent-%COMP%] {\\n      position: absolute;\\n      top: 10px;\\n      right: 20px;\\n      font-size: 24px;\\n      cursor: pointer;\\n    }\\n\\n    .fondo-difuminado[_ngcontent-%COMP%] {\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      background-color: rgba(0, 0, 0, 0.5);\\n      z-index: 999;\\n    }\\n\\n    .libro-cuadro[_ngcontent-%COMP%] {\\n      position: fixed;\\n      top: 50%;\\n      left: 50%;\\n      transform: translate(-50%, -50%);\\n      background-color: white;\\n      padding: 20px;\\n      border-radius: 5px;\\n      z-index: 1000;\\n    }\"]\n  });\n}","map":{"version":3,"names":["Libro","i0","ɵɵelementStart","ɵɵlistener","LibrosComponent_div_20_Template_div_click_1_listener","ɵɵrestoreView","_r5","ctx_r4","ɵɵnextContext","ɵɵresetView","cerrarDetalleLibro","ɵɵelementEnd","LibrosComponent_div_20_Template_span_click_3_listener","ctx_r6","ɵɵtext","ɵɵelement","LibrosComponent_div_20_Template_button_click_12_listener","ctx_r7","reservarLibro","libroBuscado","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","titulo","ɵɵtextInterpolate1","autor","ejemplaresDisponibles","ɵɵpropertyInterpolate","ɵɵproperty","getImagenUrl","imagen","ɵɵsanitizeUrl","LibrosComponent_div_21_div_1_Template_button_click_10_listener","restoredCtx","_r11","libro_r9","$implicit","ctx_r10","mostrarDetalleLibro","ctx_r8","ɵɵtemplate","LibrosComponent_div_21_div_1_Template","ctx_r1","libros","LibrosComponent_div_23_Template_div_click_1_listener","_r13","ctx_r12","cerrarFormularioAgregar","LibrosComponent_div_23_Template_span_click_4_listener","ctx_r14","LibrosComponent_div_23_Template_form_ngSubmit_8_listener","ctx_r15","agregarLibro","LibrosComponent_div_23_Template_input_ngModelChange_12_listener","$event","ctx_r16","nuevoLibro","LibrosComponent_div_23_Template_input_ngModelChange_16_listener","ctx_r17","LibrosComponent_div_23_Template_input_ngModelChange_20_listener","ctx_r18","LibrosComponent_div_23_Template_input_change_24_listener","ctx_r19","onFileSelected","ctx_r3","LibrosComponent","constructor","libroService","reservaService","router","nombreBusqueda","mostrarFormulario","ngOnInit","obtenerLibros","obtenerTodosLosLibros","subscribe","console","log","error","buscarLibrosPorNombre","buscarLibrosPorTitulo","respuesta","Array","isArray","length","undefined","event","selectedFile","target","files","libro","usuarioId","id","alert","mostrarFormularioAgregar","crearLibro","push","_","ɵɵdirectiveInject","i1","LibroService","i2","ReservaService","i3","Router","_2","selectors","decls","vars","consts","template","LibrosComponent_Template","rf","ctx","LibrosComponent_Template_input_ngModelChange_14_listener","LibrosComponent_Template_button_click_16_listener","LibrosComponent_Template_button_click_18_listener","LibrosComponent_div_20_Template","LibrosComponent_div_21_Template","LibrosComponent_div_22_Template","LibrosComponent_div_23_Template"],"sources":["C:\\Users\\Juanma\\Documents\\GitHub\\librotech\\src\\app\\componentes\\libros.component.ts","C:\\Users\\Juanma\\Documents\\GitHub\\librotech\\src\\app\\componentes\\libros.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Libro } from '../model/libro.model';\r\nimport { LibroService } from '../services/libro.service';\r\nimport { ReservaService } from '../services/reserva.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-libros',\r\n  templateUrl: './libros.component.html'\r\n})\r\nexport class LibrosComponent implements OnInit {\r\n\r\n  libros: Libro[] = [];\r\n  nombreBusqueda: string = '';\r\n  libroBuscado: Libro | undefined;\r\n  mostrarFormulario: boolean = false;\r\n  nuevoLibro: Libro = new Libro(0, '', '', 0, '');\r\n  selectedFile!: File;\r\n\r\n  constructor(\r\n    private libroService: LibroService,\r\n    private reservaService: ReservaService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.obtenerLibros();\r\n  }\r\n\r\n  obtenerLibros(): void {\r\n    this.libroService.obtenerTodosLosLibros().subscribe(\r\n      libros => {\r\n        console.log('Todos los libros:', libros);\r\n        this.libros = libros;\r\n      },\r\n      error => {\r\n        console.error('Error al obtener todos los libros:', error);\r\n      }\r\n    );\r\n  }\r\n  buscarLibrosPorNombre(): void {\r\n    console.log('Buscando libros con el nombre:', this.nombreBusqueda);\r\n  \r\n    if (this.nombreBusqueda) {\r\n      this.libroService.buscarLibrosPorTitulo(this.nombreBusqueda).subscribe(\r\n        (respuesta: any) => {\r\n          const libros = Array.isArray(respuesta) ? respuesta : [respuesta];\r\n          console.log('Libros encontrados:', libros);\r\n  \r\n          if (libros.length > 0) {\r\n            this.libroBuscado = libros[0];\r\n            console.log('Libro buscado actualizado:', this.libroBuscado);\r\n          } else {\r\n            this.libroBuscado = undefined;\r\n            console.log('No se encontraron libros con el nombre:', this.nombreBusqueda);\r\n          }\r\n        },\r\n        error => {\r\n          console.error('Error al buscar libros por título:', error);\r\n        }\r\n      );\r\n    } else {\r\n      this.libroBuscado = undefined;\r\n      this.obtenerLibros();\r\n    }\r\n  }\r\n\r\n  \r\n\r\n  onFileSelected(event: any): void {\r\n    this.selectedFile = event.target.files[0];\r\n  }\r\n\r\n  getImagenUrl(imagen: string): string {\r\n    return `http://localhost:8086/api/images/${imagen}`;\r\n  }\r\n\r\n  reservarLibro(libro: Libro): void {\r\n    const usuarioId = 1; // Asigna el ID del usuario actualmente logueado\r\n    if (libro.ejemplaresDisponibles > 0) {\r\n      this.reservaService.reservarLibro(libro.id, usuarioId).subscribe(\r\n        () => {\r\n          libro.ejemplaresDisponibles--;\r\n        },\r\n        error => {\r\n          console.error('Error al reservar libro:', error);\r\n        }\r\n      );\r\n    } else {\r\n      alert(`No hay ejemplares disponibles para el libro ${libro.titulo}.`);\r\n    }\r\n  }\r\n\r\n  mostrarFormularioAgregar(): void {\r\n    this.mostrarFormulario = true;\r\n  }\r\n\r\n  cerrarFormularioAgregar(): void {\r\n    this.mostrarFormulario = false;\r\n  }\r\n\r\n  agregarLibro(): void {\r\n    this.libroService.crearLibro(this.nuevoLibro).subscribe(\r\n      (libro: Libro) => {\r\n        this.libros.push(libro);\r\n        this.cerrarFormularioAgregar();\r\n      },\r\n      error => {\r\n        console.error('Error al agregar libro:', error);\r\n      }\r\n    );\r\n  }\r\n}\r\n","<!DOCTYPE html>\r\n<html lang=\"es\">\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n  <title>Listado de Libros</title>\r\n  <!-- Bootstrap CSS -->\r\n  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n  <style>\r\n    .modal {\r\n      display: none;\r\n      justify-content: center;\r\n      align-items: center;\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      background-color: rgba(0, 0, 0, 0.5);\r\n      z-index: 1000;\r\n    }\r\n\r\n    .modal-content {\r\n      background-color: white;\r\n      padding: 20px;\r\n      border-radius: 5px;\r\n      width: 500px;\r\n      max-width: 100%;\r\n      position: relative;\r\n    }\r\n\r\n    .close {\r\n      position: absolute;\r\n      top: 10px;\r\n      right: 20px;\r\n      font-size: 24px;\r\n      cursor: pointer;\r\n    }\r\n\r\n    .fondo-difuminado {\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      background-color: rgba(0, 0, 0, 0.5);\r\n      z-index: 999;\r\n    }\r\n\r\n    .libro-cuadro {\r\n      position: fixed;\r\n      top: 50%;\r\n      left: 50%;\r\n      transform: translate(-50%, -50%);\r\n      background-color: white;\r\n      padding: 20px;\r\n      border-radius: 5px;\r\n      z-index: 1000;\r\n    }\r\n  </style>\r\n</head>\r\n<body>\r\n  <div class=\"container mt-4 libro-container\">\r\n    <h2>Listado de Libros</h2>\r\n  \r\n    <div class=\"mb-3\">\r\n      <label for=\"nombreBusqueda\" class=\"form-label\">Buscar:</label>\r\n      <input type=\"text\" id=\"nombreBusqueda\" [(ngModel)]=\"nombreBusqueda\" class=\"form-control\">\r\n      <div class=\"d-flex justify-content-between mt-2\">\r\n        <button class=\"btn btn-primary\" (click)=\"buscarLibrosPorNombre()\">Buscar</button>\r\n        <button class=\"btn btn-success\" (click)=\"mostrarFormularioAgregar()\">Agregar Libro</button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"modal\" *ngIf=\"libroBuscado\">\r\n      <div class=\"fondo-difuminado\" (click)=\"cerrarDetalleLibro()\"></div>\r\n      <div class=\"libro-cuadro\">\r\n        <span class=\"close\" (click)=\"cerrarDetalleLibro()\">&times;</span>\r\n        <h3>{{ libroBuscado.titulo }}</h3>\r\n        <p>Autor: {{ libroBuscado.autor }}</p>\r\n        <p>Ejemplares disponibles: {{ libroBuscado.ejemplaresDisponibles }}</p>\r\n        <img [src]=\"getImagenUrl(libroBuscado.imagen)\" alt=\"{{ libroBuscado.titulo }}\" class=\"img-fluid\">\r\n        <button class=\"btn btn-primary\" (click)=\"reservarLibro(libroBuscado)\">Reservar</button>\r\n      </div>\r\n    </div>\r\n  \r\n    <div class=\"row\" *ngIf=\"libros.length > 0\">\r\n      <div class=\"col-md-4 mb-4\" *ngFor=\"let libro of libros\">\r\n        <div class=\"card h-100 card-libro\">\r\n          <img [src]=\"getImagenUrl(libro.imagen)\" class=\"card-img-top\" alt=\"{{ libro.titulo }}\">\r\n          <div class=\"card-body\">\r\n            <h5 class=\"card-title\">{{ libro.titulo }}</h5>\r\n            <p class=\"card-text\">Autor: {{ libro.autor }}</p>\r\n            <p class=\"card-text\">Ejemplares Disponibles: {{ libro.ejemplaresDisponibles }}</p>\r\n            <button class=\"btn btn-primary\" (click)=\"mostrarDetalleLibro(libro)\">Ver Detalle</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  \r\n    <div *ngIf=\"!libros.length\">\r\n      <p>No se encontraron libros.</p>\r\n    </div>\r\n  \r\n    <div *ngIf=\"mostrarFormulario\">\r\n      <div class=\"fondo-difuminado\" (click)=\"cerrarFormularioAgregar()\"></div>\r\n      <div class=\"modal\">\r\n        <div class=\"modal-content\">\r\n          <span class=\"close\" (click)=\"cerrarFormularioAgregar()\">&times;</span>\r\n          <h2>Agregar Nuevo Libro\r\n          </h2>\r\n          <form (ngSubmit)=\"agregarLibro()\">\r\n            <div class=\"mb-3\">\r\n               <label for=\"titulo\" class=\"form-label\">Título</label>\r\n              <input type=\"text\" class=\"form-control\" id=\"titulo\" [(ngModel)]=\"nuevoLibro.titulo\" name=\"titulo\" required>\r\n            </div>\r\n            <div class=\"mb-3\">\r\n              <label for=\"autor\" class=\"form-label\">Autor</label>\r\n              <input type=\"text\" class=\"form-control\" id=\"autor\" [(ngModel)]=\"nuevoLibro.autor\" name=\"autor\" required>\r\n            </div>\r\n            <div class=\"mb-3\">\r\n              <label for=\"ejemplares\" class=\"form-label\">Ejemplares Disponibles</label>\r\n              <input type=\"number\" class=\"form-control\" id=\"ejemplares\" [(ngModel)]=\"nuevoLibro.ejemplaresDisponibles\" name=\"ejemplares\" required>\r\n              <div class=\"mb-3\">\r\n                <label for=\"imagen\" class=\"form-label\">Imagen</label>\r\n                <input type=\"file\" class=\"form-control\" id=\"imagen\" (change)=\"onFileSelected($event)\">\r\n              </div>\r\n              <button type=\"submit\" class=\"btn btn-primary\">Agregar</button>\r\n            </div>\r\n          </form>\r\n        </div> <!-- Cerrar modal-content -->\r\n      </div> <!-- Cerrar modal -->\r\n    </div> <!-- Cerrar *ngIf=\"mostrarFormulario\" -->\r\n  </div> <!-- Cerrar container -->\r\n</body>\r\n</html>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}