{"ast":null,"code":"import { Libro } from '../model/libro.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/libro.service\";\nimport * as i2 from \"../services/reserva.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction LibrosComponent_div_20_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"div\", 16);\n    i0.ɵɵelement(2, \"img\", 17);\n    i0.ɵɵelementStart(3, \"div\", 18)(4, \"h5\", 19);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 20);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\", 20);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function LibrosComponent_div_20_div_1_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const libro_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.reservarLibro(libro_r4));\n    });\n    i0.ɵɵtext(11, \"Reservar\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const libro_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"alt\", libro_r4.titulo);\n    i0.ɵɵproperty(\"src\", ctx_r3.getImagenUrl(libro_r4.imagen), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(libro_r4.titulo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Autor: \", libro_r4.autor, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Ejemplares Disponibles: \", libro_r4.ejemplaresDisponibles, \"\");\n  }\n}\nfunction LibrosComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, LibrosComponent_div_20_div_1_Template, 12, 5, \"div\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.libros);\n  }\n}\nfunction LibrosComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2, \"No se encontraron libros.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction LibrosComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 21);\n    i0.ɵɵlistener(\"click\", function LibrosComponent_div_22_Template_div_click_1_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.cerrarFormularioAgregar());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"div\", 22)(3, \"div\", 23)(4, \"span\", 24);\n    i0.ɵɵlistener(\"click\", function LibrosComponent_div_22_Template_span_click_4_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.cerrarFormularioAgregar());\n    });\n    i0.ɵɵtext(5, \"\\u00D7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"h2\");\n    i0.ɵɵtext(7, \"Agregar Nuevo Libro\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"form\", 25);\n    i0.ɵɵlistener(\"ngSubmit\", function LibrosComponent_div_22_Template_form_ngSubmit_8_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.agregarLibro());\n    });\n    i0.ɵɵelementStart(9, \"div\", 5)(10, \"label\", 26);\n    i0.ɵɵtext(11, \"T\\u00EDtulo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"input\", 27);\n    i0.ɵɵlistener(\"ngModelChange\", function LibrosComponent_div_22_Template_input_ngModelChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.nuevoLibro.titulo = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\", 5)(14, \"label\", 28);\n    i0.ɵɵtext(15, \"Autor\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"input\", 29);\n    i0.ɵɵlistener(\"ngModelChange\", function LibrosComponent_div_22_Template_input_ngModelChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.nuevoLibro.autor = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\", 5)(18, \"label\", 30);\n    i0.ɵɵtext(19, \"Ejemplares Disponibles\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"input\", 31);\n    i0.ɵɵlistener(\"ngModelChange\", function LibrosComponent_div_22_Template_input_ngModelChange_20_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.nuevoLibro.ejemplaresDisponibles = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"div\", 5)(22, \"label\", 32);\n    i0.ɵɵtext(23, \"Imagen\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"input\", 33);\n    i0.ɵɵlistener(\"change\", function LibrosComponent_div_22_Template_input_change_24_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.onFileSelected($event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"button\", 34);\n    i0.ɵɵtext(26, \"Agregar\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.nuevoLibro.titulo);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.nuevoLibro.autor);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.nuevoLibro.ejemplaresDisponibles);\n  }\n}\nexport class LibrosComponent {\n  constructor(libroService, reservaService, router) {\n    this.libroService = libroService;\n    this.reservaService = reservaService;\n    this.router = router;\n    this.libros = [];\n    this.nombreBusqueda = '';\n    this.mostrarFormulario = false;\n    this.nuevoLibro = new Libro(0, '', '', 0, '');\n  }\n  ngOnInit() {\n    this.obtenerLibros();\n  }\n  obtenerLibros() {\n    this.libroService.obtenerTodosLosLibros().subscribe(libros => {\n      console.log('Todos los libros:', libros);\n      this.libros = libros;\n    }, error => {\n      console.error('Error al obtener todos los libros:', error);\n    });\n  }\n  buscarLibros() {\n    console.log('Buscando libros con el nombre o autor:', this.nombreBusqueda);\n    if (this.nombreBusqueda) {\n      this.libroService.buscarLibrosPorTitulo(this.nombreBusqueda).subscribe(respuestaTitulo => {\n        const librosTitulo = Array.isArray(respuestaTitulo) ? respuestaTitulo : [respuestaTitulo];\n        console.log('Libros encontrados por título:', librosTitulo);\n        // Mostramos los libros encontrados, o si no hay, no hacemos nada\n        this.libros = librosTitulo;\n      }, error => {\n        console.error('Error al buscar libros por título:', error);\n      });\n    }\n  }\n  onFileSelected(event) {\n    this.selectedFile = event.target.files[0];\n  }\n  getImagenUrl(imagen) {\n    return `http://localhost:8086/api/images/${imagen}`;\n  }\n  reservarLibro(libro) {\n    const usuarioId = 1; // Asigna el ID del usuario actualmente logueado\n    if (libro.ejemplaresDisponibles > 0) {\n      this.reservaService.reservarLibro(libro.id, usuarioId).subscribe(() => {\n        libro.ejemplaresDisponibles--;\n      }, error => {\n        console.error('Error al reservar libro:', error);\n      });\n    } else {\n      alert(`No hay ejemplares disponibles para el libro ${libro.titulo}.`);\n    }\n  }\n  mostrarFormularioAgregar() {\n    this.mostrarFormulario = true;\n  }\n  cerrarFormularioAgregar() {\n    this.mostrarFormulario = false;\n  }\n  agregarLibro() {\n    this.libroService.crearLibro(this.nuevoLibro).subscribe(libro => {\n      this.libros.push(libro);\n      this.cerrarFormularioAgregar();\n    }, error => {\n      console.error('Error al agregar libro:', error);\n    });\n  }\n  static #_ = this.ɵfac = function LibrosComponent_Factory(t) {\n    return new (t || LibrosComponent)(i0.ɵɵdirectiveInject(i1.LibroService), i0.ɵɵdirectiveInject(i2.ReservaService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LibrosComponent,\n    selectors: [[\"app-libros\"]],\n    decls: 23,\n    vars: 4,\n    consts: [[\"lang\", \"es\"], [\"charset\", \"UTF-8\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1.0\"], [\"href\", \"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\", \"rel\", \"stylesheet\"], [1, \"container\", \"mt-4\", \"libro-container\"], [1, \"mb-3\"], [\"for\", \"nombreBusqueda\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"nombreBusqueda\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"d-flex\", \"justify-content-between\", \"mt-2\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [\"class\", \"row\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"row\"], [\"class\", \"col-md-4 mb-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-4\", \"mb-4\"], [1, \"card\", \"h-100\", \"card-libro\"], [1, \"card-img-top\", 3, \"src\", \"alt\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\"], [1, \"fondo-difuminado\", 3, \"click\"], [1, \"modal\"], [1, \"modal-content\"], [1, \"close\", 3, \"click\"], [3, \"ngSubmit\"], [\"for\", \"titulo\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"titulo\", \"name\", \"titulo\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"autor\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"autor\", \"name\", \"autor\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"ejemplares\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"ejemplares\", \"name\", \"ejemplares\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"imagen\", 1, \"form-label\"], [\"type\", \"file\", \"id\", \"imagen\", 1, \"form-control\", 3, \"change\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"]],\n    template: function LibrosComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"html\", 0)(1, \"head\");\n        i0.ɵɵelement(2, \"meta\", 1)(3, \"meta\", 2);\n        i0.ɵɵelementStart(4, \"title\");\n        i0.ɵɵtext(5, \"Listado de Libros\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(6, \"link\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"body\")(8, \"div\", 4)(9, \"h2\");\n        i0.ɵɵtext(10, \"Listado de Libros\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 5)(12, \"label\", 6);\n        i0.ɵɵtext(13, \"Buscar:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"input\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function LibrosComponent_Template_input_ngModelChange_14_listener($event) {\n          return ctx.nombreBusqueda = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 8)(16, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function LibrosComponent_Template_button_click_16_listener() {\n          return ctx.buscarLibros();\n        });\n        i0.ɵɵtext(17, \"Buscar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function LibrosComponent_Template_button_click_18_listener() {\n          return ctx.mostrarFormularioAgregar();\n        });\n        i0.ɵɵtext(19, \"Agregar Libro\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(20, LibrosComponent_div_20_Template, 2, 1, \"div\", 11);\n        i0.ɵɵtemplate(21, LibrosComponent_div_21_Template, 3, 0, \"div\", 12);\n        i0.ɵɵtemplate(22, LibrosComponent_div_22_Template, 27, 3, \"div\", 12);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"ngModel\", ctx.nombreBusqueda);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.libros.length > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.libros.length);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.mostrarFormulario);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NumberValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.NgModel, i5.NgForm],\n    styles: [\".modal[_ngcontent-%COMP%] {\\n      display: flex;\\n      justify-content: center;\\n      align-items: center;\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      background-color: rgba(0, 0, 0, 0.5);\\n      z-index: 1000;\\n    }\\n\\n    .modal-content[_ngcontent-%COMP%] {\\n      background-color: white;\\n      padding: 20px;\\n      border-radius: 5px;\\n      width: 500px;\\n      max-width: 100%;\\n    }\\n\\n    .close[_ngcontent-%COMP%] {\\n      position: absolute;\\n      top: 10px;\\n      right: 20px;\\n      font-size: 24px;\\n      cursor: pointer;\\n    }\\n\\n    .fondo-difuminado[_ngcontent-%COMP%] {\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      background-color: rgba(0, 0, 0, 0.5);\\n      z-index: 999;\\n    }\\n\\n    .libro-cuadro[_ngcontent-%COMP%] {\\n      position: fixed;\\n      top: 50%;\\n      left: 50%;\\n      transform: translate(-50%, -50%);\\n      background-color: white;\\n      padding: 20px;\\n      border-radius: 5px;\\n      z-index: 1000;\\n    }\"]\n  });\n}","map":{"version":3,"names":["Libro","i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵlistener","LibrosComponent_div_20_div_1_Template_button_click_10_listener","restoredCtx","ɵɵrestoreView","_r6","libro_r4","$implicit","ctx_r5","ɵɵnextContext","ɵɵresetView","reservarLibro","ɵɵadvance","ɵɵpropertyInterpolate","titulo","ɵɵproperty","ctx_r3","getImagenUrl","imagen","ɵɵsanitizeUrl","ɵɵtextInterpolate","ɵɵtextInterpolate1","autor","ejemplaresDisponibles","ɵɵtemplate","LibrosComponent_div_20_div_1_Template","ctx_r0","libros","LibrosComponent_div_22_Template_div_click_1_listener","_r8","ctx_r7","cerrarFormularioAgregar","LibrosComponent_div_22_Template_span_click_4_listener","ctx_r9","LibrosComponent_div_22_Template_form_ngSubmit_8_listener","ctx_r10","agregarLibro","LibrosComponent_div_22_Template_input_ngModelChange_12_listener","$event","ctx_r11","nuevoLibro","LibrosComponent_div_22_Template_input_ngModelChange_16_listener","ctx_r12","LibrosComponent_div_22_Template_input_ngModelChange_20_listener","ctx_r13","LibrosComponent_div_22_Template_input_change_24_listener","ctx_r14","onFileSelected","ctx_r2","LibrosComponent","constructor","libroService","reservaService","router","nombreBusqueda","mostrarFormulario","ngOnInit","obtenerLibros","obtenerTodosLosLibros","subscribe","console","log","error","buscarLibros","buscarLibrosPorTitulo","respuestaTitulo","librosTitulo","Array","isArray","event","selectedFile","target","files","libro","usuarioId","id","alert","mostrarFormularioAgregar","crearLibro","push","_","ɵɵdirectiveInject","i1","LibroService","i2","ReservaService","i3","Router","_2","selectors","decls","vars","consts","template","LibrosComponent_Template","rf","ctx","LibrosComponent_Template_input_ngModelChange_14_listener","LibrosComponent_Template_button_click_16_listener","LibrosComponent_Template_button_click_18_listener","LibrosComponent_div_20_Template","LibrosComponent_div_21_Template","LibrosComponent_div_22_Template","length"],"sources":["C:\\Users\\Juanma\\Documents\\GitHub\\librotech\\src\\app\\componentes\\libros.component.ts","C:\\Users\\Juanma\\Documents\\GitHub\\librotech\\src\\app\\componentes\\libros.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Libro } from '../model/libro.model';\r\nimport { LibroService } from '../services/libro.service';\r\nimport { ReservaService } from '../services/reserva.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-libros',\r\n  templateUrl: './libros.component.html'\r\n})\r\nexport class LibrosComponent implements OnInit {\r\n\r\n  libros: Libro[] = [];\r\n  nombreBusqueda: string = '';\r\n  libroBuscado: Libro | undefined;\r\n  mostrarFormulario: boolean = false;\r\n  nuevoLibro: Libro = new Libro(0, '', '', 0, '');\r\n  selectedFile!: File;\r\n\r\n  constructor(\r\n    private libroService: LibroService,\r\n    private reservaService: ReservaService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.obtenerLibros();\r\n  }\r\n\r\n  obtenerLibros(): void {\r\n    this.libroService.obtenerTodosLosLibros().subscribe(\r\n      libros => {\r\n        console.log('Todos los libros:', libros);\r\n        this.libros = libros;\r\n      },\r\n      error => {\r\n        console.error('Error al obtener todos los libros:', error);\r\n      }\r\n    );\r\n  }\r\n  buscarLibros(): void {\r\n    console.log('Buscando libros con el nombre o autor:', this.nombreBusqueda);\r\n  \r\n    if (this.nombreBusqueda) {\r\n      this.libroService.buscarLibrosPorTitulo(this.nombreBusqueda).subscribe(\r\n        (respuestaTitulo: any) => {\r\n          const librosTitulo = Array.isArray(respuestaTitulo) ? respuestaTitulo : [respuestaTitulo];\r\n          console.log('Libros encontrados por título:', librosTitulo);\r\n  \r\n          // Mostramos los libros encontrados, o si no hay, no hacemos nada\r\n          this.libros = librosTitulo;\r\n        },\r\n        error => {\r\n          console.error('Error al buscar libros por título:', error);\r\n        }\r\n      );\r\n    }\r\n  }\r\n  \r\n\r\n  onFileSelected(event: any): void {\r\n    this.selectedFile = event.target.files[0];\r\n  }\r\n\r\n  getImagenUrl(imagen: string): string {\r\n    return `http://localhost:8086/api/images/${imagen}`;\r\n  }\r\n\r\n  reservarLibro(libro: Libro): void {\r\n    const usuarioId = 1; // Asigna el ID del usuario actualmente logueado\r\n    if (libro.ejemplaresDisponibles > 0) {\r\n      this.reservaService.reservarLibro(libro.id, usuarioId).subscribe(\r\n        () => {\r\n          libro.ejemplaresDisponibles--;\r\n        },\r\n        error => {\r\n          console.error('Error al reservar libro:', error);\r\n        }\r\n      );\r\n    } else {\r\n      alert(`No hay ejemplares disponibles para el libro ${libro.titulo}.`);\r\n    }\r\n  }\r\n\r\n  mostrarFormularioAgregar(): void {\r\n    this.mostrarFormulario = true;\r\n  }\r\n\r\n  cerrarFormularioAgregar(): void {\r\n    this.mostrarFormulario = false;\r\n  }\r\n\r\n  agregarLibro(): void {\r\n    this.libroService.crearLibro(this.nuevoLibro).subscribe(\r\n      (libro: Libro) => {\r\n        this.libros.push(libro);\r\n        this.cerrarFormularioAgregar();\r\n      },\r\n      error => {\r\n        console.error('Error al agregar libro:', error);\r\n      }\r\n    );\r\n  }\r\n}\r\n","<!DOCTYPE html>\r\n<html lang=\"es\">\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n  <title>Listado de Libros</title>\r\n  <!-- Bootstrap CSS -->\r\n  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n  <style>\r\n    .modal {\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      background-color: rgba(0, 0, 0, 0.5);\r\n      z-index: 1000;\r\n    }\r\n\r\n    .modal-content {\r\n      background-color: white;\r\n      padding: 20px;\r\n      border-radius: 5px;\r\n      width: 500px;\r\n      max-width: 100%;\r\n    }\r\n\r\n    .close {\r\n      position: absolute;\r\n      top: 10px;\r\n      right: 20px;\r\n      font-size: 24px;\r\n      cursor: pointer;\r\n    }\r\n\r\n    .fondo-difuminado {\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      background-color: rgba(0, 0, 0, 0.5);\r\n      z-index: 999;\r\n    }\r\n\r\n    .libro-cuadro {\r\n      position: fixed;\r\n      top: 50%;\r\n      left: 50%;\r\n      transform: translate(-50%, -50%);\r\n      background-color: white;\r\n      padding: 20px;\r\n      border-radius: 5px;\r\n      z-index: 1000;\r\n    }\r\n  </style>\r\n</head>\r\n<body>\r\n  <div class=\"container mt-4 libro-container\">\r\n    <h2>Listado de Libros</h2>\r\n  \r\n    <div class=\"mb-3\">\r\n      <label for=\"nombreBusqueda\" class=\"form-label\">Buscar:</label>\r\n      <input type=\"text\" id=\"nombreBusqueda\" [(ngModel)]=\"nombreBusqueda\" class=\"form-control\">\r\n      <div class=\"d-flex justify-content-between mt-2\">\r\n        <button class=\"btn btn-primary\" (click)=\"buscarLibros()\">Buscar</button>\r\n        <button class=\"btn btn-success\" (click)=\"mostrarFormularioAgregar()\">Agregar Libro</button>\r\n      </div>\r\n    </div>\r\n  \r\n    <div class=\"row\" *ngIf=\"libros.length > 0\">\r\n      <div class=\"col-md-4 mb-4\" *ngFor=\"let libro of libros\">\r\n        <div class=\"card h-100 card-libro\">\r\n          <img [src]=\"getImagenUrl(libro.imagen)\" class=\"card-img-top\" alt=\"{{ libro.titulo }}\">\r\n          <div class=\"card-body\">\r\n            <h5 class=\"card-title\">{{ libro.titulo }}</h5>\r\n            <p class=\"card-text\">Autor: {{ libro.autor }}</p>\r\n            <p class=\"card-text\">Ejemplares Disponibles: {{ libro.ejemplaresDisponibles }}</p>\r\n            <button class=\"btn btn-primary\" (click)=\"reservarLibro(libro)\">Reservar</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  \r\n    <div *ngIf=\"!libros.length\">\r\n      <p>No se encontraron libros.</p>\r\n    </div>\r\n  \r\n    <div *ngIf=\"mostrarFormulario\">\r\n      <div class=\"fondo-difuminado\" (click)=\"cerrarFormularioAgregar()\"></div>\r\n      <div class=\"modal\">\r\n        <div class=\"modal-content\">\r\n          <span class=\"close\" (click)=\"cerrarFormularioAgregar()\">&times;</span>\r\n          <h2>Agregar Nuevo Libro</h2>\r\n          <form (ngSubmit)=\"agregarLibro()\">\r\n            <div class=\"mb-3\">\r\n               <label for=\"titulo\" class=\"form-label\">Título</label>\r\n              <input type=\"text\" class=\"form-control\" id=\"titulo\" [(ngModel)]=\"nuevoLibro.titulo\" name=\"titulo\" required>\r\n            </div>\r\n            <div class=\"mb-3\">\r\n              <label for=\"autor\" class=\"form-label\">Autor</label>\r\n              <input type=\"text\" class=\"form-control\" id=\"autor\" [(ngModel)]=\"nuevoLibro.autor\" name=\"autor\" required>\r\n            </div>\r\n            <div class=\"mb-3\">\r\n              <label for=\"ejemplares\" class=\"form-label\">Ejemplares Disponibles</label>\r\n              <input type=\"number\" class=\"form-control\" id=\"ejemplares\" [(ngModel)]=\"nuevoLibro.ejemplaresDisponibles\" name=\"ejemplares\" required>\r\n              <div class=\"mb-3\">\r\n                <label for=\"imagen\" class=\"form-label\">Imagen</label>\r\n                <input type=\"file\" class=\"form-control\" id=\"imagen\" (change)=\"onFileSelected($event)\">\r\n              </div>\r\n              <button type=\"submit\" class=\"btn btn-primary\">Agregar</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \r\n  </body>\r\n  </html>\r\n  \r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}